(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13db2eb8"],{"0ea4":function(e,a,r){"use strict";var t=r("1536"),n=r.n(t);n.a},1536:function(e,a,r){},"3b06":function(e,a,r){"use strict";var t=r("beef"),n=r.n(t);n.a},aa4c:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"l-page l-page--flex"},[r("div",{staticClass:"l-page__content"},[r("div",{staticClass:"content--padding"},[r("div",{staticClass:"content__body"},[r("div",{staticClass:"service_add_header"},[e._v("添加"+e._s(e.serverType)+"服务到"+e._s(e.envName))]),r("add-option",{directives:[{name:"show",rawName:"v-show",value:"option"==e.activeTabName,expression:"activeTabName == 'option'"}],ref:"addOption",on:{changeNextDisable:e.changeNextDisable}}),e.addNameFlg?r("add-name",{directives:[{name:"show",rawName:"v-show",value:"name"==e.activeTabName,expression:"activeTabName == 'name'"}],ref:"addName",attrs:{"env-id":e.envId}}):e._e(),e.addInstanceFlg?r("add-instance",{directives:[{name:"show",rawName:"v-show",value:"instance"==e.activeTabName,expression:"activeTabName == 'instance'"}],ref:"addInstance",attrs:{"env-id":e.envId,"server-type":e.serverType,"instance-type":e.instanceType}}):e._e(),e.addServiceFlg?r("add-service",{directives:[{name:"show",rawName:"v-show",value:"service"==e.activeTabName,expression:"activeTabName == 'service'"}],ref:"addService",attrs:{"env-id":e.envId,"server-type":e.serverType}}):e._e(),e.addRunFlg?r("add-run",{directives:[{name:"show",rawName:"v-show",value:"run"==e.activeTabName,expression:"activeTabName == 'run'"}],ref:"addRun",attrs:{"env-id":e.envId,"server-type":e.serverType,"server-name":e.serverName,"property-list":e.propertyList,"instance-list":e.instanceList},on:{runComplete:e.runComplete}}):e._e(),e.addCompleteFlg?r("add-complete",{directives:[{name:"show",rawName:"v-show",value:"complete"==e.activeTabName,expression:"activeTabName == 'complete'"}],ref:"addComplete"}):e._e()],1)])]),r("div",{staticClass:"service_add_bottom"},[r("el-button",{attrs:{disabled:"run"==e.activeTabName,size:"small"},on:{click:e.backService}},[e._v(" 返回 ")]),r("el-button",{attrs:{disabled:e.nextDisable,size:"small",type:"primary"},on:{click:e.nextService}},[e._v(" "+e._s("run"==this.activeTabName?"完成":"下一步")+" ")])],1)])},n=[],s=(r("96cf"),r("1da1")),i=r("1b62"),c=r("22ce"),v=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"service-add-option"},[r("el-table",{attrs:{data:e.serviceAddOptions.tableData,size:"medium",border:""}},[r("el-table-column",{attrs:{label:"服务类型",width:"240","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[r("el-radio",{attrs:{label:a.row.serverType},nativeOn:{change:function(r){return e.changeSelectServerType(a.row.instanceType)}},model:{value:e.serviceAddOptions.selectServerType,callback:function(a){e.$set(e.serviceAddOptions,"selectServerType",a)},expression:"serviceAddOptions.selectServerType"}},[r("svg-icon",{attrs:{"icon-class":e.serviceIconClass(a.row.serverType)}}),e._v(" "+e._s(a.row.serverType)+" ")],1)]}}])}),r("el-table-column",{attrs:{prop:"serverDesc",label:"说明","header-align":"center"}})],1)],1)},d=[],o={name:"serviceAddOption",data:function(){return{serviceAddOptions:{selectServerType:!1,tableData:[{serverType:"ZMSCollector",serverDesc:"zms监控指标采集",instanceType:["INSTANCE"]},{serverType:"ZMSAlert",serverDesc:"zms主题、消费组告警",instanceType:["INSTANCE"]},{serverType:"Kafka",serverDesc:"高吞吐量的分布式发布订阅消息系统",instanceType:["BROKER"]},{serverType:"Rocketmq",serverDesc:"分布式消息中间件，具有低延迟、高吞吐量、高可用性",instanceType:["NAMESVR","BROKER"]},{serverType:"Zookeeper",serverDesc:"zms集群、主题、消费组、kafka集群元数据管理",instanceType:["INSTANCE"]},{serverType:"InfluxDB",serverDesc:"zms集群、主题、消费组监控数据存储数据库",instanceType:["INSTANCE"]},{serverType:"ZMSBackupCluster",serverDesc:"用于同步不同环境集群元数据",instanceType:["INSTANCE"]}]}}},methods:{changeSelectServerType:function(e){this.$emit("changeNextDisable",e)},serviceIconClass:function(e){switch(e){case"Zookeeper":return"Zookeeper";case"InfluxDB":return"influxDb";case"ZMSAlert":return"gaojing";case"ZMSCollector":return"caiji";case"Rocketmq":return"RocketMQ";case"Kafka":return"Kafka";case"ZMSBackupCluster":return"backup";default:return""}}}},m=o,l=(r("3b06"),r("2877")),u=Object(l["a"])(m,v,d,!1,null,null,null),p=u.exports,b=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"service-add-name"},[r("el-form",{ref:"serviceAddNameForm",attrs:{size:"mini",model:e.serviceAddNameForm,"label-width":"50px"}},[r("el-form-item",{attrs:{label:"名称",prop:"serverName",rules:[{required:!0,message:"请输入服务名称",trigger:"blur"}]}},[r("el-input",{model:{value:e.serviceAddNameForm.serverName,callback:function(a){e.$set(e.serviceAddNameForm,"serverName",a)},expression:"serviceAddNameForm.serverName"}})],1)],1)],1)},N=[],f=(r("a9e3"),{name:"serviceAddName",mixins:[i["b"],i["a"]],props:{envId:[Number,String]},data:function(){return{serviceAddNameForm:{serverName:""}}},methods:{checkServerName:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,t,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=!0,t={envId:e.envId,serverName:e.serviceAddNameForm.serverName},a.next=4,Object(c["q"])(t);case 4:return n=a.sent,n.result||(e.message("error","服务名称已存在"),r=!1),a.abrupt("return",r);case 7:case"end":return a.stop()}}),a)})))()},validateServerName:function(){var e=!1;return this.$refs["serviceAddNameForm"].validate((function(a){e=!!a})),e}}}),T=f,h=(r("0ea4"),Object(l["a"])(T,b,N,!1,null,null,null)),g=h.exports,x=r("5877"),y=r("547f"),k=r("f704"),S=r("58ee"),w={name:"serviceAddHome",mixins:[i["b"],i["a"]],components:{addOption:p,addName:g,addService:y["a"],addInstance:x["a"],addRun:k["a"],addComplete:S["a"]},data:function(){return{envId:"",envName:"",nextDisable:!0,activeTabName:"option",addNameFlg:!1,addServiceFlg:!1,addInstanceFlg:!1,addRunFlg:!1,addCompleteFlg:!1,serverType:"",serverName:"",propertyList:[],instanceList:[],instanceType:[]}},created:function(){this.envId=this.$route.params.envId,this.envName=this.$route.params.envName},methods:{changeNextDisable:function(e){this.nextDisable=!1,this.addNameFlg=!1,this.addInstanceFlg=!1,this.addServiceFlg=!1,this.addRunFlg=!1,this.addCompleteFlg=!1,this.instanceType=e},runComplete:function(){this.nextDisable=!1},nextService:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,t,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("option"!==e.activeTabName){a.next=6;break}e.serverType=e.$refs.addOption.serviceAddOptions.selectServerType,e.addNameFlg=!0,e.activeTabName="name",a.next=40;break;case 6:if("name"!==e.activeTabName){a.next=20;break}if(r=e.$refs.addName.validateServerName(),r){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,e.$refs.addName.checkServerName();case 12:if(r=a.sent,r){a.next=15;break}return a.abrupt("return");case 15:e.serverName=e.$refs.addName.serviceAddNameForm.serverName,e.addInstanceFlg=!0,e.activeTabName="instance",a.next=40;break;case 20:if("instance"!==e.activeTabName){a.next=29;break}if(t=e.$refs.addInstance.validInstanceData(),t){a.next=24;break}return a.abrupt("return");case 24:e.instanceList=e.$refs.addInstance.serviceAddInstanceForm.instanceList,e.addServiceFlg=!0,e.activeTabName="service",a.next=40;break;case 29:if("service"!==e.activeTabName){a.next=39;break}if(n=e.$refs.addService.serviceInstanceConfigSave(),n){a.next=33;break}return a.abrupt("return");case 33:e.propertyList=e.$refs.addService.serviceConfigData,e.addRunFlg=!0,e.activeTabName="run",e.nextDisable=!0,a.next=40;break;case 39:("run"===e.activeTabName||"complete"===e.activeTabName)&&e.$router.push({name:"Welcome"});case 40:case"end":return a.stop()}}),a)})))()},backService:function(){"option"===this.activeTabName?this.$router.push({name:"Welcome"}):"name"===this.activeTabName?this.activeTabName="option":"instance"===this.activeTabName?this.activeTabName="name":"service"===this.activeTabName?this.activeTabName="instance":"run"===this.activeTabName?this.activeTabName="service":"complete"===this.activeTabName&&(this.activeTabName="run")},checkServerName:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={envId:e.envId,serverName:e.serverName},a.next=3,Object(c["q"])(r);case 3:if(t=a.sent,t.result){a.next=7;break}return e.message("error","服务名称已存在"),a.abrupt("return",!1);case 7:return a.abrupt("return",!0);case 8:case"end":return a.stop()}}),a)})))()}}},I=w,C=(r("c6ba"),Object(l["a"])(I,t,n,!1,null,null,null));a["default"]=C.exports},beef:function(e,a,r){},c6ba:function(e,a,r){"use strict";var t=r("dec8"),n=r.n(t);n.a},dec8:function(e,a,r){}}]);