(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ee6f6dc"],{"1b62":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return p}));a("d81d");var n=a("cdd9"),r={data:function(){return{isCollapse:!1,reSubmit:!1,loading:!1,opTitle:"",opType:"",opKey:1,opDialog:!1,clearFk:1,mulSelection:[]}},methods:{commonEdit:function(e){var t=this;this.opType="edit",this.modalData=e,this.opKey++,setTimeout((function(){t.opDialog=!0}),n["a"].modalTime)},commonAdd:function(){var e=this;this.opType="add",this.opKey++,setTimeout((function(){e.opDialog=!0}),n["a"].modalTime)},callbackModal:function(){this.fetchData()},onReset:function(){this.$refs["formData"].resetFields(),this.clearFk++},handleSelectionChange:function(e){this.mulSelection=e},preDeleteBatch:function(e){var t=[];this.mulSelection.map((function(a){t.push(a[e])})),this.handleDelete(t)},preDelete:function(e,t,a){a&&a.stopPropagation();var n=[e[t]];this.handleDelete(n)}}},i=a("5530"),o=a("f66f"),s=a("1a40"),l=a("5d85"),c=a("94d2"),u=a("2f62"),d=a("e350"),p={components:{tablePagination:o["a"],OperateButton:s["a"],baseForm:l["a"],colorWord:c["a"]},computed:Object(i["a"])({},u["c"]["userInfo"]),methods:{checkPerm:d["a"],checkUser:d["b"],handleDia:function(e){var t=this,a=e.row,n=void 0===a?{}:a,r=e.options,i=e.cb,o=e.nextTickCb;r=Object.assign(r,{visible:!0,currentFormValue:n}),i&&i(),this.$nextTick((function(){o&&o(),r.ref&&t.$refs[r.ref].clear()}))},handleValidate:function(e){var t=this,a=e.refname,n=e.cb;this.$nextTick((function(){t.$refs[a].handleFormValidate((function(e){n&&n(e)}))}))},isDo:function(e){var t=e.cb,a=e.title,n=e.catchcb,r=void 0===n?function(){}:n;this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t).catch(r)},go:function(e){this.$router.push(e)},message:function(e,t){this.$message({message:t,type:e})}}}},"2d9d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-dialog"},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.modalTitle,visible:e.dialog,"before-close":e.closeHandle,width:e.width||"580px"},on:{"update:visible":function(t){e.dialog=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e._t("default"),a("div",{staticClass:"c-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[e._t("button"),e.noCancle?e._e():a("el-button",{attrs:{size:"mini"},on:{click:e.closeHandle}},[e._v("取消")])],2)],2)])],1)},r=[],i={props:["dialog","modalTitle","callback","refname","loading","width","noCancle"],methods:{closeHandle:function(){this.$emit("dealDialog")}}},o=i,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,null,null);t["a"]=l.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),l=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},7743:function(e,t,a){},"77e91":function(e,t,a){"use strict";a("4160"),a("c975"),a("ac1f"),a("1276"),a("159b");var n=a("b775"),r=a("51be"),i=r["a"],o={validCode:{url:i+"/api/topic/uniqueCheck",method:"get"},applicant:{url:i+"/api/userinfo/queryApplicants",method:"get"},getTopicsByClusterId:{url:i+"/api/topic/getTopicsByClusterId",method:"get"},getTopicsByCluster:{url:i+"/api/topic/getTopicsByCluster",method:"get"}},s={list:{url:i+"/api/env/listEnvironment",method:"get"}},l={list:{url:i+"/api/service/listClusters",method:"get"}},c={list:{url:i+"/api/consumer/queryApprovedConsumers",method:"get"},getApproveTopicList:{url:i+"/api/topic/getTopicsByClusterId",method:"get"},getConsumersByClusterId:{url:i+"/api/consumer/getConsumersByClusterId",method:"get"},validCode:{url:i+"/api/consumer/uniqueCheck",method:"post"}},u={theme:o,cluster:l,consumer:c,environment:s};function d(e){if(-1===e.indexOf("_"))return u[e];var t=u;return e.split("_").forEach((function(e){t=t[e]})),t}t["a"]={accessAPI:function(e){var t=e.apiUrl,a=void 0===t?"":t,r=e.params,i=void 0===r?{}:r,o=e.headers,s=void 0===o?{}:o,l={headers:s},c=d(a);return Object.assign(l,{url:c.url,method:c.method}),"get"===c.method?Object.assign(l,{params:i}):"post"!==c.method&&"put"!==c.method&&"patch"!==c.method&&"delete"!==c.method||Object.assign(l,{data:i}),Object(n["a"])(l)}}},"9b3e":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));a("99af");var n=a("b775"),r=a("51be"),i=r["a"];function o(e){return Object(n["a"])({url:"".concat(i,"/api/kafka/cmd/consumerSummary"),method:"get",params:e})}function s(e,t){return Object(n["a"])({url:"".concat(i,"/api/kafka/cmd/resetOffset?envId=").concat(e),method:"post",data:t})}function l(e){return Object(n["a"])({url:"".concat(i,"/api/kafka/cmd/topicSummary"),method:"get",params:e})}},a002:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-page l-page--flex theme-detail consumerdelay"},[a("div",{staticClass:"page-nav"},[a("div",{staticClass:"content_breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("Kafka控制台")]),a("el-breadcrumb-item",[e._v(" topicSummary ")])],1)],1)]),a("div",{staticClass:"l-page__content"},[a("div",{staticClass:"content--padding"},[a("div",{staticClass:"content__header"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}]},[a("el-form",{ref:"formData",staticClass:"search__form",attrs:{model:e.formData,size:"mini","label-position":"right","label-width":e.GLOBAL.fFormLabel}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"环境",prop:"envId",rules:[{required:!0,message:"请输入消费组",trigger:"blur"}]}},[a("el-select",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.SearchEnvId.loading,expression:"SearchEnvId.loading"}],on:{focus:e.getEnvListOptions},model:{value:e.formData.envId,callback:function(t){e.$set(e.formData,"envId",t)},expression:"formData.envId"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchEnvId.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"集群",prop:"clusterName",rules:[{required:!0,message:"请输入集群",trigger:"blur"}]}},[a("el-select",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.SearchCluster.loading,expression:"SearchCluster.loading"}],on:{focus:e.getClusterOptions},model:{value:e.formData.clusterName,callback:function(t){e.$set(e.formData,"clusterName",t)},expression:"formData.clusterName"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchCluster.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"主题",prop:"topicName",rules:[{required:!0,message:"请输入主题",trigger:"blur"}]}},[a("el-select",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.SearchTheme.loading,expression:"SearchTheme.loading"}],on:{focus:e.getThemeOptions},model:{value:e.formData.topicName,callback:function(t){e.$set(e.formData,"topicName",t)},expression:"formData.topicName"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchTheme.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"search__btns"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchHandler}},[e._v(" 查询 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onReset}},[e._v(" 重置 ")])],1)])],1)],1)],1)])],1),a("div",{staticClass:"content__body"},[a("div",{staticClass:"l-table-list"},[a("div",{staticClass:"l-table-box"},[a("h3",[e._v("主题详情")]),a("table-pagination",e._b({},"table-pagination",e.topicInfostable,!1))],1),a("div",{staticClass:"l-table-box"},[a("h3",[e._v("消费组信息")]),a("table-pagination",e._b({},"table-pagination",e.consumertable,!1),[a("template",{slot:"insert"},[a("el-table-column",e._b({attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleData(t.row)}}},[e._v("查看")])]}}])},"el-table-column",e.GLOBAL.column,!1))],1)],2)],1),a("div",{staticClass:"l-table-box"},[a("h3",[e._v("主题配置信息")]),a("table-pagination",e._b({},"table-pagination",e.topicConfigstable,!1))],1)])])])]),a("op-freight",{staticClass:"topicSunmmary",attrs:{dialog:e.diaOptions.visible,modalTitle:e.diaOptions.diatitle,"no-cancle":!0,width:"80%"},on:{dealDialog:e.closeDia}},[a("div",{staticClass:"content--padding"},[a("div",{staticClass:"content__body"},[a("div",{staticClass:"l-table-box"},[a("table-pagination",e._b({staticStyle:{paddingBottom:"40px"}},"table-pagination",e.topicSunmmary,!1),[a("p",{staticStyle:{marginTop:"0"}},[e._v("总延迟:"+e._s(e.totalLag))])])],1)])])])],1)},r=[],i=(a("96cf"),a("1da1")),o=a("1b62"),s=a("2d9d"),l=a("9b3e"),c=(a("d81d"),a("b0c0"),a("5530")),u=a("12de"),d={data:function(){return{formData:{envId:null,clusterName:"",topicName:""},SearchEnvId:{options:[],loading:!1},SearchCluster:{options:[],loading:!1},SearchTheme:{options:[],loading:!1}}},computed:{envId:function(){return this.formData.envId},clusterName:function(){return this.formData.clusterName},topicName:function(){return this.formData.topicName}},watch:{envId:function(){this.formData.clusterName="",this.formData.topicName=""},clusterName:function(){this.formData.topicName=""}},methods:{getEnvListOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchEnvId.loading=!0,t.next=3,Object(u["m"])();case 3:a=t.sent,a.result&&(e.SearchEnvId.options=a.result.map((function(e){return Object(c["a"])({label:e.environmentName,value:e.id},e)})),e.SearchEnvId.loading=!1);case 5:case"end":return t.stop()}}),t)})))()},getClusterOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.formData.envId){t.next=2;break}return t.abrupt("return");case 2:return e.SearchCluster.loading=!0,a={envId:e.formData.envId,serviceType:"KAFKA"},t.next=6,Object(u["h"])(a);case 6:n=t.sent,n.result&&(e.SearchCluster.options=n.result.map((function(e){return Object(c["a"])({label:e.serverName,value:e.serverName},e)})),e.SearchCluster.loading=!1);case 8:case"end":return t.stop()}}),t)})))()},getThemeOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.formData.envId&&null!=e.formData.clusterName){t.next=2;break}return t.abrupt("return");case 2:return e.SearchTheme.loading=!0,a={envId:e.formData.envId,clusterType:"KAFKA",clusterName:e.formData.clusterName},t.next=6,Object(u["r"])(a);case 6:n=t.sent,n.result&&(e.SearchTheme.options=n.result.map((function(e){return Object(c["a"])({label:e.name,value:e.name},e)}))),e.SearchTheme.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},searchHandler:function(){var e=this;this.$refs.formData.validate((function(t){t&&e.loadTabledata(e.formData)}))}}},p={visible:!1,ref:"diaform",diatitle:"查看消费信息",clusterName:"",envId:""},m={name:"topicSummary",mixins:[o["b"],o["a"],d],components:{OpFreight:s["a"]},data:function(){return{diaOptions:p,totalLag:"",topicInfostable:{columns:[{type:"index",width:40},{prop:"partition",label:"partition"},{prop:"offset",label:"offset"},{prop:"leader",label:"leader"},{prop:"isr",label:"isr"},{prop:"replicas",label:"replicas"}],data:[],loading:!1},consumertable:{columns:[{type:"index",width:60},{prop:"value",label:"value"}],data:[],insertNum:1,loading:!1},topicConfigstable:{columns:[{type:"index",width:40},{prop:"object1",label:"label"},{prop:"object2",label:"value"}],data:[],loading:!1},topicSunmmary:{columns:[{type:"index",width:40},{prop:"topic",label:"topic",width:200},{prop:"partition",label:"partition",width:150},{prop:"lag",label:"latency",sortable:!0,width:150},{prop:"consumerOffset",label:"consumerOffset",width:150},{prop:"host",label:"host",width:150},{prop:"clientId",label:"clientId",width:150},{prop:"consumerId",label:"consumerId",width:350}],data:[]}}},created:function(){},methods:{loadTabledata:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o,s,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},t.topicInfostable.loading=!0,t.consumertable.loading=!0,t.topicConfigstable.loading=!0,a.next=6,Object(l["c"])(n);case 6:r=a.sent,i=r.result,o=i.topicInfos,s=i.topicConfigs,c=i.consumers,u=i.cluster,d=i.envId,t.topicInfostable.data=o,t.topicConfigstable.data=s,t.consumertable.data=c,t.diaOptions.envId=d,t.diaOptions.clusterName=u,t.topicInfostable.loading=!1,t.consumertable.loading=!1,t.topicConfigstable.loading=!1;case 21:case"end":return a.stop()}}),a)})))()},handleData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.info("row",e),n={envId:t.diaOptions.envId,clusterName:t.diaOptions.clusterName,consumerName:e.value},p.visible=!0,a.next=5,Object(l["a"])(n);case 5:r=a.sent,i=r.result,o=i.totalLag,s=i.consumerInfos,t.topicSunmmary.data=s,t.totalLag=o;case 11:case"end":return a.stop()}}),a)})))()},closeDia:function(){Object.assign(this.diaOptions,{visible:!1})}}},f=m,h=(a("ec6ff"),a("2877")),b=Object(h["a"])(f,n,r,!1,null,null,null);t["default"]=b.exports},a15b:function(e,t,a){"use strict";var n=a("23e7"),r=a("44ad"),i=a("fc6a"),o=a("b301"),s=[].join,l=r!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:l||c},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},a623:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").every,i=a("b301");n({target:"Array",proto:!0,forced:i("every")},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),m=a("241c").f,f=a("06cf").f,h=a("9bf2").f,b=a("58a8").trim,v="Number",g=r[v],I=g.prototype,C=l(p(I))==v,y=function(e){var t,a,n,r,i,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=c.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>r)return NaN;return parseInt(i,n)}return+c};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var N,_=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof _&&(C?d((function(){I.valueOf.call(a)})):l(a)!=v)?c(new g(y(t)),a,_):y(t)},w=n?m(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)s(g,N=w[O])&&!s(_,N)&&h(_,N,f(g,N));_.prototype=I,I.constructor=_,o(r,v,_)}},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,i=a("1dde");n({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e350:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));a("caad"),a("45fc"),a("2532");var n=a("4360"),r=function(e){if(e&&e instanceof Array&&e.length>0){var t=n["a"].getters&&n["a"].getters.permissions,a=e,r=t.some((function(e){return a.includes(e)}));return!!r}return console.error("need roles! Like v-if=\"checkPerm['op_editor']\""),!1},i=function(e){var t=n["a"].getters.userInfo.realName;return e===t}},ec6ff:function(e,t,a){"use strict";var n=a("7743"),r=a.n(n);r.a}}]);