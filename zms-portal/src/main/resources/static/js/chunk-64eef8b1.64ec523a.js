(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64eef8b1"],{"1b62":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return m}));n("d81d");var a=n("cdd9"),r={data:function(){return{isCollapse:!1,reSubmit:!1,loading:!1,opTitle:"",opType:"",opKey:1,opDialog:!1,clearFk:1,mulSelection:[]}},methods:{commonEdit:function(e){var t=this;this.opType="edit",this.modalData=e,this.opKey++,setTimeout((function(){t.opDialog=!0}),a["a"].modalTime)},commonAdd:function(){var e=this;this.opType="add",this.opKey++,setTimeout((function(){e.opDialog=!0}),a["a"].modalTime)},callbackModal:function(){this.fetchData()},onReset:function(){this.$refs["formData"].resetFields(),this.clearFk++},handleSelectionChange:function(e){this.mulSelection=e},preDeleteBatch:function(e){var t=[];this.mulSelection.map((function(n){t.push(n[e])})),this.handleDelete(t)},preDelete:function(e,t,n){n&&n.stopPropagation();var a=[e[t]];this.handleDelete(a)}}},i=n("5530"),o=n("f66f"),c=n("1a40"),s=n("5d85"),u=n("94d2"),l=n("2f62"),d=n("e350"),m={components:{tablePagination:o["a"],OperateButton:c["a"],baseForm:s["a"],colorWord:u["a"]},computed:Object(i["a"])({},l["c"]["userInfo"]),methods:{checkPerm:d["a"],checkUser:d["b"],handleDia:function(e){var t=this,n=e.row,a=void 0===n?{}:n,r=e.options,i=e.cb,o=e.nextTickCb;r=Object.assign(r,{visible:!0,currentFormValue:a}),i&&i(),this.$nextTick((function(){o&&o(),r.ref&&t.$refs[r.ref].clear()}))},handleValidate:function(e){var t=this,n=e.refname,a=e.cb;this.$nextTick((function(){t.$refs[n].handleFormValidate((function(e){a&&a(e)}))}))},isDo:function(e){var t=e.cb,n=e.title,a=e.catchcb,r=void 0===a?function(){}:a;this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t).catch(r)},go:function(e){this.$router.push(e)},message:function(e,t){this.$message({message:t,type:e})}}}},"2d9d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-dialog"},[n("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.modalTitle,visible:e.dialog,"before-close":e.closeHandle,width:e.width||"580px"},on:{"update:visible":function(t){e.dialog=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e._t("default"),n("div",{staticClass:"c-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[e._t("button"),e.noCancle?e._e():n("el-button",{attrs:{size:"mini"},on:{click:e.closeHandle}},[e._v("取消")])],2)],2)])],1)},r=[],i={props:["dialog","modalTitle","callback","refname","loading","width","noCancle"],methods:{closeHandle:function(){this.$emit("dealDialog")}}},o=i,c=n("2877"),s=Object(c["a"])(o,a,r,!1,null,null,null);t["a"]=s.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"77e91":function(e,t,n){"use strict";n("4160"),n("c975"),n("ac1f"),n("1276"),n("159b");var a=n("b775"),r=n("51be"),i=r["a"],o={validCode:{url:i+"/api/topic/uniqueCheck",method:"get"},applicant:{url:i+"/api/userinfo/queryApplicants",method:"get"},getTopicsByClusterId:{url:i+"/api/topic/getTopicsByClusterId",method:"get"},getTopicsByCluster:{url:i+"/api/topic/getTopicsByCluster",method:"get"}},c={list:{url:i+"/api/env/listEnvironment",method:"get"}},s={list:{url:i+"/api/service/listClusters",method:"get"}},u={list:{url:i+"/api/consumer/queryApprovedConsumers",method:"get"},getApproveTopicList:{url:i+"/api/topic/getTopicsByClusterId",method:"get"},getConsumersByClusterId:{url:i+"/api/consumer/getConsumersByClusterId",method:"get"},validCode:{url:i+"/api/consumer/uniqueCheck",method:"post"}},l={theme:o,cluster:s,consumer:u,environment:c};function d(e){if(-1===e.indexOf("_"))return l[e];var t=l;return e.split("_").forEach((function(e){t=t[e]})),t}t["a"]={accessAPI:function(e){var t=e.apiUrl,n=void 0===t?"":t,r=e.params,i=void 0===r?{}:r,o=e.headers,c=void 0===o?{}:o,s={headers:c},u=d(n);return Object.assign(s,{url:u.url,method:u.method}),"get"===u.method?Object.assign(s,{params:i}):"post"!==u.method&&"put"!==u.method&&"patch"!==u.method&&"delete"!==u.method||Object.assign(s,{data:i}),Object(a["a"])(s)}}},a15b:function(e,t,n){"use strict";var a=n("23e7"),r=n("44ad"),i=n("fc6a"),o=n("b301"),c=[].join,s=r!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:s||u},{join:function(e){return c.call(i(this),void 0===e?",":e)}})},a623:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").every,i=n("b301");a({target:"Array",proto:!0,forced:i("every")},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),o=n("6eeb"),c=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),m=n("7c73"),p=n("241c").f,f=n("06cf").f,h=n("9bf2").f,g=n("58a8").trim,b="Number",v=r[b],O=v.prototype,C=s(m(O))==b,y=function(e){var t,n,a,r,i,o,c,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(i=u.slice(2),o=i.length,c=0;c<o;c++)if(s=i.charCodeAt(c),s<48||s>r)return NaN;return parseInt(i,a)}return+u};if(i(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var j,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(C?d((function(){O.valueOf.call(n)})):s(n)!=b)?u(new v(y(t)),n,w):y(t)},I=a?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;I.length>T;T++)c(v,j=I[T])&&!c(w,j)&&h(w,j,f(v,j));w.prototype=O,O.constructor=w,o(r,b,w)}},b68e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-page l-page--flex consumerdelay"},[n("div",{staticClass:"page-nav"},[e._v("消费迁移")]),n("div",{staticClass:"l-page__content"},[n("div",{staticClass:"content--padding"},[n("div",{staticClass:"content__header"},[n("el-button",e._b({staticStyle:{float:"right","margin-top":"5px"},attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.transferOpen}},"el-button",e.GLOBAL.button,!1),[e._v(" 开始迁移 ")]),n("div",[e._v(" 环境 "),n("el-select",e._b({staticStyle:{"margin-right":"15px",width:"100px","margin-left":"5px"},attrs:{size:"mini"},on:{change:e.envChange},model:{value:e.envId,callback:function(t){e.envId=t},expression:"envId"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchEnv.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"搜索  ( 集群 、 消费组 )"},on:{change:e.searchMaintable},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),n("div",{staticClass:"content__body"},[n("table-pagination",e._b({attrs:{"data-handler":e.handleTableData},on:{changePage:e.pageHandler}},"table-pagination",e.maintable,!1))],1)])]),n("op-freight",{attrs:{dialog:e.diaOptions.visible,modalTitle:e.diaOptions.diatitle,loading:e.diaOptions.loading},on:{dealDialog:e.closeDia}},[n("base-form",{ref:e.diaOptions.ref,attrs:{forms:e.diaOptions.forms,"current-form-value":e.diaOptions.currentFormValue,"label-width":"90px"}}),n("template",{slot:"button"},[n("el-button",e._b({on:{click:e.beginTransfer}},"el-button",e.GLOBAL.button,!1),[e._v("执行迁移")])],1)],2)],1)},r=[],i=(n("96cf"),n("1da1")),o=n("1b62"),c=(n("d81d"),n("b0c0"),n("5530")),s=n("cf80"),u=n("d9d3"),l={data:function(){return{formData:{envId:"",serviceId:"",name:""},SearchEnv:{options:[],loading:!1},SearchCluster:{options:[],loading:!1},SearchConsumer:{options:[],loading:!1}}},computed:{envId:function(){return this.formData.envId},serviceId:function(){return this.formData.serviceId}},watch:{envId:function(){this.formData.serviceId="",this.formData.name=""},serviceId:function(){this.formData.name=""}},methods:{getEnvOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchEnv.loading=!0,t.next=3,Object(s["b"])();case 3:n=t.sent,n.result&&(e.SearchEnv.options=n.result.map((function(e){return Object(c["a"])({label:e.environmentName,value:e.id},e)})),e.SearchEnv.loading=!1);case 5:case"end":return t.stop()}}),t)})))()},getClusterOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchCluster.loading=!0,n={envId:e.formData.envId},t.next=4,Object(s["a"])(n);case 4:a=t.sent,a.result&&(e.SearchCluster.options=a.result.map((function(e){return Object(c["a"])({label:e.serverName,value:e.id},e)})),e.SearchCluster.loading=!1);case 6:case"end":return t.stop()}}),t)})))()},getConsumerOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchConsumer.loading=!0,n={envId:e.formData.envId,clusterId:e.formData.serviceId},t.next=4,Object(u["o"])(n);case 4:a=t.sent,a.result&&(e.SearchConsumer.options=a.result.map((function(e){return Object(c["a"])({label:e.name,value:e.name},e)}))),e.SearchConsumer.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},searchHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$refs.formData.validate((function(n){n&&(t=Object.assign({},t,e.formData),e.loadTabledata(e.formData))}))}}},d=(n("a15b"),{data:function(){return{diaOptions:{visible:!1,ref:"diaform",diatitle:"【消费】迁移进度",forms:[{prop:"consumerNames",label:"迁移消费",disabled:!0,defaultValue:""},{prop:"targetClusterId",label:"目标集群",itemType:"remoteselect",apiUrl:"cluster_list",labelkeyname:"serverName",valuekeyname:"id",rules:[{required:!0,message:"请选择集群",trigger:"change"}]}],currentFormValue:{},loading:!1}}},methods:{transferOpen:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selections=e.$refs.maintable.getTableSelections(),n=e.selections,0!==n.length){t.next=5;break}return e.message("error","请选择数据！"),t.abrupt("return");case 5:a={consumerNames:e.selections.map((function(e){return e.name})).join()},e.handleDia({options:e.diaOptions,row:a,cb:function(){}});case 7:case"end":return t.stop()}}),t)})))()},closeDia:function(){Object.assign(this.diaOptions,{visible:!1})},beginTransfer:function(){var e=this;this.handleValidate({refname:"diaform",cb:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return delete n.consumerNames,n.consumers=e.selections.map((function(e){return e.id})).join(),t.next=4,Object(s["e"])(n);case 4:e.closeDia(),e.loadTabledata();case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()})}}}),m=n("2d9d"),p=n("ca00"),f={name:"consumerTransfer",mixins:[o["b"],o["a"],l,d],components:{OpFreight:m["a"]},data:function(){return{envId:"",keyWord:"",maintable:{ref:"maintable",columns:[{type:"selection",width:50,fixed:"left"},{prop:"name",label:"消费者",width:250},{prop:"topicName",label:"主题名",width:250},{prop:"broadcastTxt",label:"是否广播",width:80},{prop:"consumerFromTxt",label:"消费位置",width:100},{prop:"delayThreadhold",label:"积压阀值",width:100},{prop:"applicant",label:"申请人",width:150},{prop:"domain",label:"申请域（appId）",width:200},{prop:"memo",label:"备注","min-width":300},{prop:"modifyDate",label:"修改时间",width:160}],data:[],loading:!1,currentPage:1,pageSize:25,total:0,pagePagination:!0}}},created:function(){this.getEnvOptions(),this.loadTabledata()},methods:{pageHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.assembleData(e);this.loadTabledata(t)},assembleData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.envId=this.envId,e.keyWord=this.keyWord,e},envChange:function(e){this.envId=e;var t=this.assembleData();this.loadTabledata(t)},searchMaintable:function(){var e=this.assembleData();this.loadTabledata(e)},loadTabledata:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.maintable.loading=!0,a.currentPage||(a.currentPage=t.maintable.currentPage,a.pageSize=t.maintable.pageSize),n.next=5,Object(u["e"])(a);case 5:r=n.sent,r.result&&(t.maintable.data=r.result.records,t.maintable.currentPage=r.result.currentPage,t.maintable.pageSize=r.result.pageSize,t.maintable.total=r.result.total,t.maintable.loading=!1);case 7:case"end":return n.stop()}}),n)})))()},handleTableData:function(e){var t=e.modifyDate,n=e.consumerFrom,a=e.broadcast;return Object.assign(e,{broadcastTxt:1==a?"是":"否",consumerFromTxt:1==n?"Earliest":"Latest",modifyDate:p["a"].dateToStr(new Date(t),3)}),e}}},h=f,g=n("2877"),b=Object(g["a"])(h,a,r,!1,null,null,null);t["default"]=b.exports},cf80:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d}));var a=n("b775"),r=n("51be"),i=r["a"];function o(e){return Object(a["a"])({url:"".concat(i,"/api/env/listEnvironment"),method:"get",params:e})}function c(e){return Object(a["a"])({url:"".concat(i,"/api/service/listClusters"),method:"get",params:e})}function s(e){return Object(a["a"])({url:"".concat(i,"/api/service/queryClusters"),method:"get",params:e})}function u(e){return Object(a["a"])({url:"".concat(i,"/api/migrate/migrateClusterTopicZk"),method:"get",params:e})}function l(e){return Object(a["a"])({url:"".concat(i,"/api/migrate/migrateClusterConsumerZk"),method:"get",params:e})}function d(e){return Object(a["a"])({url:"".concat(i,"/api/migrate/migrateZk"),method:"get",params:e})}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde");a({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},d9d3:function(e,t,n){"use strict";n.d(t,"o",(function(){return o})),n.d(t,"n",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"s",(function(){return O})),n.d(t,"k",(function(){return C})),n.d(t,"r",(function(){return y})),n.d(t,"q",(function(){return j})),n.d(t,"p",(function(){return w})),n.d(t,"j",(function(){return I}));var a=n("b775"),r=n("51be"),i=r["a"];function o(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/queryApprovedConsumers"),method:"get",params:e})}function c(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/getConsumersByClusterId"),method:"get",params:e})}function s(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/query"),method:"get",params:e})}function u(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/add"),method:"post",data:e})}function l(e,t){return Object(a["a"])({url:"".concat(i,"/api/consumer/update"),method:"put",data:t})}function d(e,t){return Object(a["a"])({url:"".concat(i,"/api/consumer/approve"),method:"post",data:t})}function m(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/delete"),method:"post",data:e})}function p(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/updateGated"),method:"post",data:e})}function f(e){return Object(a["a"])({url:"".concat(i,"/api/rocketmq/cmd/consumerStatusAllNew"),method:"get",params:e})}function h(e){return Object(a["a"])({url:"".concat(i,"/api/kafka/cmd/consumerSummary"),method:"get",params:e})}function g(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/copyConsumers"),method:"post",data:e})}function b(e){return Object(a["a"])({url:"".concat(i,"/api/consumer/consumerZmsRegister"),method:"post",data:e})}function v(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryConsumerGroupMetricsNew"),method:"get",params:e})}function O(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryTopicMetricsNew"),method:"get",params:e})}function C(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryConsumerClients"),method:"get",params:e})}function y(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryConsumerUserCostTimeMs"),method:"get",params:e})}function j(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryConsumeSuccessRate"),method:"get",params:e})}function w(e){return Object(a["a"])({url:"".concat(i,"/api/statistics/queryConsumeFailureRate"),method:"get",params:e})}function I(){return Object(a["a"])({url:"".concat(i,"/api/env/listEnvironment"),method:"get"})}},e350:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n("caad"),n("45fc"),n("2532");var a=n("4360"),r=function(e){if(e&&e instanceof Array&&e.length>0){var t=a["a"].getters&&a["a"].getters.permissions,n=e,r=t.some((function(e){return n.includes(e)}));return!!r}return console.error("need roles! Like v-if=\"checkPerm['op_editor']\""),!1},i=function(e){var t=a["a"].getters.userInfo.realName;return e===t}}}]);