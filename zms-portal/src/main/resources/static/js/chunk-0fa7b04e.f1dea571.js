(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fa7b04e"],{"01bd":function(e,t,n){"use strict";var a=n("68ec"),r=n.n(a);r.a},"1b62":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return m}));n("d81d");var a=n("cdd9"),r={data:function(){return{isCollapse:!1,reSubmit:!1,loading:!1,opTitle:"",opType:"",opKey:1,opDialog:!1,clearFk:1,mulSelection:[]}},methods:{commonEdit:function(e){var t=this;this.opType="edit",this.modalData=e,this.opKey++,setTimeout((function(){t.opDialog=!0}),a["a"].modalTime)},commonAdd:function(){var e=this;this.opType="add",this.opKey++,setTimeout((function(){e.opDialog=!0}),a["a"].modalTime)},callbackModal:function(){this.fetchData()},onReset:function(){this.$refs["formData"].resetFields(),this.clearFk++},handleSelectionChange:function(e){this.mulSelection=e},preDeleteBatch:function(e){var t=[];this.mulSelection.map((function(n){t.push(n[e])})),this.handleDelete(t)},preDelete:function(e,t,n){n&&n.stopPropagation();var a=[e[t]];this.handleDelete(a)}}},o=n("5530"),i=n("f66f"),c=n("1a40"),s=n("5d85"),u=n("94d2"),l=n("2f62"),d=n("e350"),m={components:{tablePagination:i["a"],OperateButton:c["a"],baseForm:s["a"],colorWord:u["a"]},computed:Object(o["a"])({},l["c"]["userInfo"]),methods:{checkPerm:d["a"],checkUser:d["b"],handleDia:function(e){var t=this,n=e.row,a=void 0===n?{}:n,r=e.options,o=e.cb,i=e.nextTickCb;r=Object.assign(r,{visible:!0,currentFormValue:a}),o&&o(),this.$nextTick((function(){i&&i(),r.ref&&t.$refs[r.ref].clear()}))},handleValidate:function(e){var t=this,n=e.refname,a=e.cb;this.$nextTick((function(){t.$refs[n].handleFormValidate((function(e){a&&a(e)}))}))},isDo:function(e){var t=e.cb,n=e.title,a=e.catchcb,r=void 0===a?function(){}:a;this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t).catch(r)},go:function(e){this.$router.push(e)},message:function(e,t){this.$message({message:t,type:e})}}}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),o="["+r+"]",i=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"68ec":function(e,t,n){},"77e91":function(e,t,n){"use strict";n("4160"),n("c975"),n("ac1f"),n("1276"),n("159b");var a=n("b775"),r=n("51be"),o=r["a"],i={validCode:{url:o+"/api/topic/uniqueCheck",method:"get"},applicant:{url:o+"/api/userinfo/queryApplicants",method:"get"},getTopicsByClusterId:{url:o+"/api/topic/getTopicsByClusterId",method:"get"},getTopicsByCluster:{url:o+"/api/topic/getTopicsByCluster",method:"get"}},c={list:{url:o+"/api/env/listEnvironment",method:"get"}},s={list:{url:o+"/api/service/listClusters",method:"get"}},u={list:{url:o+"/api/consumer/queryApprovedConsumers",method:"get"},getApproveTopicList:{url:o+"/api/topic/getTopicsByClusterId",method:"get"},getConsumersByClusterId:{url:o+"/api/consumer/getConsumersByClusterId",method:"get"},validCode:{url:o+"/api/consumer/uniqueCheck",method:"post"}},l={theme:i,cluster:s,consumer:u,environment:c};function d(e){if(-1===e.indexOf("_"))return l[e];var t=l;return e.split("_").forEach((function(e){t=t[e]})),t}t["a"]={accessAPI:function(e){var t=e.apiUrl,n=void 0===t?"":t,r=e.params,o=void 0===r?{}:r,i=e.headers,c=void 0===i?{}:i,s={headers:c},u=d(n);return Object.assign(s,{url:u.url,method:u.method}),"get"===u.method?Object.assign(s,{params:o}):"post"!==u.method&&"put"!==u.method&&"patch"!==u.method&&"delete"!==u.method||Object.assign(s,{data:o}),Object(a["a"])(s)}}},"9cd1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-page l-page--flex consumerdelay"},[n("div",{staticClass:"page-nav"},[e._v("消费延迟")]),n("div",{staticClass:"l-page__content"},[n("div",{staticClass:"content--padding"},[n("div",{staticClass:"content__header",staticStyle:{"padding-bottom":"15px"}},[n("div",{staticStyle:{float:"right","padding-top":"5px",position:"relative","z-index":"1"}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeHandler},model:{value:e.delayType,callback:function(t){e.delayType=t},expression:"delayType"}},[n("el-radio-button",{attrs:{label:"all"}},[e._v("全部")]),n("el-radio-button",{attrs:{label:"rocketmq"}},[e._v("rocketmq")]),n("el-radio-button",{attrs:{label:"kafka"}},[e._v("kafka")])],1),n("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini","active-text":"大于积压阈值"},model:{value:e.allDelay,callback:function(t){e.allDelay=t},expression:"allDelay"}})],1),n("div",[n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}]},[n("el-form",{ref:"formData",staticClass:"search__form",attrs:{model:e.formData,size:"mini","label-position":"right","label-width":e.GLOBAL.fFormLabel}},[n("el-row",{staticStyle:{"padding-top":"10px"}},[n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"环境",prop:"envId"}},[n("el-select",{model:{value:e.envId,callback:function(t){e.envId=t},expression:"envId"}},e._l(e.environment,(function(e){return n("el-option",{key:e.environmentName,attrs:{label:e.environmentName,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"集群",prop:"clusterName"}},[n("el-select",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.SearchCluster.loading,expression:"SearchCluster.loading"}],on:{focus:e.getClusterOptions},model:{value:e.formData.clusterName,callback:function(t){e.$set(e.formData,"clusterName",t)},expression:"formData.clusterName"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchCluster.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"消费者",prop:"name"}},[n("el-select",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.SearchConsumer.loading,expression:"SearchConsumer.loading"}],on:{focus:e.getConsumerOptions},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}},"el-select",e.GLOBAL.select,!1),e._l(e.SearchConsumer.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:0}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"allDelay"},model:{value:e.allDelay,callback:function(t){e.allDelay=t},expression:"allDelay"}})],1),n("el-col",{staticStyle:{"margin-left":"15px"},attrs:{span:3}},[n("el-button",{staticStyle:{"padding-top":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.searchHandler}},[e._v(" 查询 ")]),n("el-button",{staticStyle:{"padding-top":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.onReset}},[e._v(" 重置 ")])],1)],1)],1)],1)])],1)]),n("div",{staticClass:"content__body"},[n("table-pagination",e._b({attrs:{"data-handler":e.handleTableData},on:{changePage:e.pageHandler}},"table-pagination",e.maintable,!1),[n("template",{slot:"insert"},[n("el-table-column",e._b({attrs:{label:"消费组",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("color-word",{attrs:{disabled:null===t.row.consumerId,type:"link"},on:{click:function(n){return e.viewDetail(t.row.consumerId)}}},[e._v(" "+e._s(t.row.consumer)+" ")])]}}])},"el-table-column",e.GLOBAL.column,!1))],1),n("template",{slot:"insert2"},[n("el-table-column",e._b({attrs:{label:"延迟数",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:t.row.latencyClass},[e._v(e._s(e.formatNumber(t.row.latency)))])]}}])},"el-table-column",e.GLOBAL.column,!1))],1)],2)],1)])])])},r=[],o=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),i=n("1b62"),c=(n("d81d"),n("b0c0"),n("5530")),s=n("d9d3"),u=n("12de"),l={data:function(){return{formData:{clusterName:"",clusterId:"",name:"",envId:void 0,allDelay:!1},SearchCluster:{options:[],loading:!1},SearchTheme:{options:[],loading:!1},SearchConsumer:{options:[],loading:!1},SearchEnv:{options:[],loading:!1},SearchApplicant:{options:[],loading:!1},SearchStatus:{options:[{label:"待审批",value:0},{label:"已审批",value:1}]}}},computed:{clusterName:function(){return this.formData.clusterName}},watch:{clusterName:function(){this.formData.name=""}},methods:{getClusterOptions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchCluster.loading=!0,n={envId:e.formData.envId},t.next=4,Object(u["h"])(n);case 4:a=t.sent,a.result&&(e.SearchCluster.options=a.result.map((function(e){return Object(c["a"])({label:e.serverName,value:e.serverName},e)})),e.SearchCluster.loading=!1);case 6:case"end":return t.stop()}}),t)})))()},getConsumerOptions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchConsumer.loading=!0,n={clusterId:e.formData.clusterId},t.next=4,Object(s["n"])(n);case 4:a=t.sent,a.result&&(e.SearchConsumer.options=a.result.map((function(e){return Object(c["a"])({label:e.name,value:e.name},e)}))),e.SearchConsumer.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},getApplicantOptions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchApplicant.loading=!0,t.next=3,Object(u["a"])();case 3:n=t.sent,n.result&&(e.SearchApplicant.options=n.result.map((function(e){return{label:e,value:e}}))),e.SearchApplicant.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},searchHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$refs.formData.validate((function(n){n&&(e.formData.envId=e.envId,t=Object.assign({},t,e.formData),e.loadTabledata(t))}))}}},d=n("b775"),m=n("51be"),p=m["a"];function f(e){return Object(d["a"])({url:"".concat(p,"/api/rocketmq/consumer/consumerLatenciesByPage"),method:"get",params:e})}function h(e){return Object(d["a"])({url:"".concat(p,"/api/kafka/consumer/consumerLatenciesByPage"),method:"get",params:e})}function v(e){return Object(d["a"])({url:"".concat(p,"/api/consumer/delay/consumerLatenciesByPage"),method:"get",params:e})}var b=n("b923"),g={name:"delayList",mixins:[i["b"],i["a"],l],components:{},data:function(){return{allDelay:!1,maintable:{columns:[{type:"index",width:40,fixed:"left"},{prop:"tps",label:"消费速度",width:200},{prop:"cluster",label:"集群",width:200},{prop:"owner",label:"所有者","min-width":150}],data:[],insertNum:1,insertNum2:1,loading:!1,currentPage:1,pageSize:25,total:0,pagePagination:!0},delayType:"rocketmq",envId:void 0,envs:void 0,environment:[]}},watch:{envId:function(){this.formData.envId=this.envId},allDelay:function(){this.pageHandler()}},created:function(){this.getListEnvironment()},methods:{getListEnvironment:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SearchEnv.loading=!0,n={},t.next=4,Object(b["c"])(n);case 4:a=t.sent,a.result&&(e.environment=a.result,e.formData.envId=a.result[0].id,e.envId=a.result[0].id),e.SearchEnv.loading=!1,e.pageHandler();case 8:case"end":return t.stop()}}),t)})))()},pageHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.assembleData(e);this.loadTabledata(t)},assembleData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.allDelay=this.allDelay,e},changeHandler:function(e){this.delayType=e,this.pageHandler()},loadTabledata:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},a.envId=t.envId,a.currentPage||(a.currentPage=t.maintable.currentPage,a.pageSize=t.maintable.pageSize),void 0!=a.envId){n.next=6;break}return t.$message("请先选择环境!"),n.abrupt("return");case 6:if(t.maintable.loading=!0,r={},"rocketmq"!=t.delayType){n.next=14;break}return n.next=11,f(a);case 11:r=n.sent,n.next=23;break;case 14:if("kafka"!=t.delayType){n.next=20;break}return n.next=17,h(a);case 17:r=n.sent,n.next=23;break;case 20:return n.next=22,v(a);case 22:r=n.sent;case 23:r.result.records?(t.maintable.currentPage=r.result.currentPage,t.maintable.pageSize=r.result.pageSize,t.maintable.total=r.result.total,t.maintable.data=r.result.records):t.maintable.data=[],t.maintable.loading=!1;case 25:case"end":return n.stop()}}),n)})))()},handleTableData:function(e){var t=e.latency,n=e.delayThreadhold;return Object.assign(e,{latencyClass:null!=n&&t>n?"over":""}),e},viewDetail:function(e){this.$router.push({name:"consumerDetail",params:{id:e}})},formatNumber:function(e){if(isNaN(e))throw new TypeError("num is not a number");return(""+e).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")}}},y=g,O=(n("01bd"),n("2877")),C=Object(O["a"])(y,a,r,!1,null,null,null);t["default"]=C.exports},a15b:function(e,t,n){"use strict";var a=n("23e7"),r=n("44ad"),o=n("fc6a"),i=n("b301"),c=[].join,s=r!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:s||u},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},a623:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").every,o=n("b301");a({target:"Array",proto:!0,forced:o("every")},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),o=n("94ca"),i=n("6eeb"),c=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),m=n("7c73"),p=n("241c").f,f=n("06cf").f,h=n("9bf2").f,v=n("58a8").trim,b="Number",g=r[b],y=g.prototype,O=s(m(y))==b,C=function(e){var t,n,a,r,o,i,c,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(o=u.slice(2),i=o.length,c=0;c<i;c++)if(s=o.charCodeAt(c),s<48||s>r)return NaN;return parseInt(o,a)}return+u};if(o(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(O?d((function(){y.valueOf.call(n)})):s(n)!=b)?u(new g(C(t)),n,w):C(t)},S=a?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;S.length>j;j++)c(g,k=S[j])&&!c(w,k)&&h(w,k,f(g,k));w.prototype=y,y.constructor=w,i(r,b,w)}},b923:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));n("99af");var a=n("b775"),r=n("51be"),o=r["a"];function i(e){return Object(a["a"])({url:"".concat(o,"/api/env/add"),method:"post",data:e})}function c(e,t){return Object(a["a"])({url:"".concat(o,"/api/env/").concat(e,"/rename"),method:"put",data:t})}function s(e,t){return Object(a["a"])({url:"".concat(o,"/api/env/").concat(e,"/loadDatabase"),method:"put",data:t})}function u(e){return Object(a["a"])({url:"".concat(o,"/api/service/listByEnvIdAndServiceType"),method:"get",params:e})}function l(e){return Object(a["a"])({url:"".concat(o,"/api/env/listEnvironment"),method:"get",params:e})}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,o=n("1dde");a({target:"Array",proto:!0,forced:!o("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},d9d3:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"s",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"r",(function(){return C})),n.d(t,"q",(function(){return k})),n.d(t,"p",(function(){return w})),n.d(t,"j",(function(){return S}));var a=n("b775"),r=n("51be"),o=r["a"];function i(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/queryApprovedConsumers"),method:"get",params:e})}function c(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/getConsumersByClusterId"),method:"get",params:e})}function s(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/query"),method:"get",params:e})}function u(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/add"),method:"post",data:e})}function l(e,t){return Object(a["a"])({url:"".concat(o,"/api/consumer/update"),method:"put",data:t})}function d(e,t){return Object(a["a"])({url:"".concat(o,"/api/consumer/approve"),method:"post",data:t})}function m(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/delete"),method:"post",data:e})}function p(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/updateGated"),method:"post",data:e})}function f(e){return Object(a["a"])({url:"".concat(o,"/api/rocketmq/cmd/consumerStatusAllNew"),method:"get",params:e})}function h(e){return Object(a["a"])({url:"".concat(o,"/api/kafka/cmd/consumerSummary"),method:"get",params:e})}function v(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/copyConsumers"),method:"post",data:e})}function b(e){return Object(a["a"])({url:"".concat(o,"/api/consumer/consumerZmsRegister"),method:"post",data:e})}function g(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryConsumerGroupMetricsNew"),method:"get",params:e})}function y(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryTopicMetricsNew"),method:"get",params:e})}function O(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryConsumerClients"),method:"get",params:e})}function C(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryConsumerUserCostTimeMs"),method:"get",params:e})}function k(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryConsumeSuccessRate"),method:"get",params:e})}function w(e){return Object(a["a"])({url:"".concat(o,"/api/statistics/queryConsumeFailureRate"),method:"get",params:e})}function S(){return Object(a["a"])({url:"".concat(o,"/api/env/listEnvironment"),method:"get"})}},e350:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n("caad"),n("45fc"),n("2532");var a=n("4360"),r=function(e){if(e&&e instanceof Array&&e.length>0){var t=a["a"].getters&&a["a"].getters.permissions,n=e,r=t.some((function(e){return n.includes(e)}));return!!r}return console.error("need roles! Like v-if=\"checkPerm['op_editor']\""),!1},o=function(e){var t=a["a"].getters.userInfo.realName;return e===t}}}]);